<div id="map"></div>
<div style="position: fixed; top: 50px; right: 20px" > <input type="button" name="TESTE" value="Clustering" onclick="toggleClustering()"></div>

<style> #map {width: 100%;} </style>
<script src="js/map-tools.js"></script>
<script src="js/functions.js"></script>
<script src="../data/coord_controle-1.csv.json"></script>
<script src="../data/coord_expostos-1.csv.json"></script>
<script src="js/MarkerCluster.js"></script>
<script src="js/MarkerCluster2.js"></script>

<script>
	// var _exceeded = "You have exceeded your daily request quota for this API. - OVER_QUERY_LIMIT - no results";
	var _exceeded = "end";

	var isClustering = false;
	function initMap() {
		 var myLatLng = {lat: -20.2905587, lng: -40.3099852};
		map = new google.maps.Map(document.getElementById('map'), {
		zoom: 4,
          center: myLatLng
		});

		
		google.maps.event.addListener(map, "zoom_changed", function(event) {
			doClustering();
		});

		
  		putControlPins(_controlPins);
		putExposedPins(_expostPins);
			
        document.getElementById('map').style.height = (window.innerHeight - 47) + "px";

		doClustering();
	}

	function doClustering(){
		if(isClustering){
				clustering();
				clustering2();
		}
	}

	function toggleClustering(){
		isClustering = !isClustering;
		initMap();
		if(isClustering){
				clustering();
				clustering2();
			}
	}

</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyABVZRiogXuIJUxQl2l4s_cXrZ2sTSlUAI&callback=initMap" async defer></script>

